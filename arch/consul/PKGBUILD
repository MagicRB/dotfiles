# Maintainer: Vasiliy Bukharev <bvp-yar@ya.ru>

pkgname=consul-bin
pkgver=1.9.0
pkgrel=1
pkgdesc='A tool for service discovery, monitoring and configuration.'
arch=('x86_64' 'aarch64')
url="https://www.consul.io/"
license=('MPL')
depends=('glibc')
provides=('consul')
source=('consul.service')
source_x86_64=("https://releases.hashicorp.com/consul/${pkgver}/consul_${pkgver}_linux_amd64.zip")
source_aarch64=("https://releases.hashicorp.com/consul/${pkgver}/consul_${pkgver}_linux_arm64.zip")

sha256sums=('44a2161e17b61996c4630ceeb87a5015aa17f4cc17dbb8a5e9fab001ce5a3253')
sha256sums_x86_64=('409b964f9cec93ba4aa3f767fe3a57e14160d86ffab63c3697d188ba29d247ce')
sha256sums_aarch64=('71b3c5551fbd297efbee74f95b138244202fcdd745b80033b99e1bc3d06043ee')
options=('!strip')

package() {
  install -Dm755 consul "$pkgdir"/usr/bin/consul
  install -Ddm750 -o root -g root "${pkgdir}/var/lib/consul"
  install -Dm644 consul.service "$pkgdir"/usr/lib/systemd/system/consul.service
  install -d "$pkgdir"/etc/consul.d
}
